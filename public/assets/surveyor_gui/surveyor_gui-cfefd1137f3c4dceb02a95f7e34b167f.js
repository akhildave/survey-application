function application_js_code(){function e(){var e=($("body"),$('input[id$="survey_section_id"]').val()),t=$('textarea[id*="question"][id$="_text"]').val(),i=$('input[id$="display_order"]').last().val(),n=$(".questions").find("input#question_group_question_id").val(),s=$('div.question_type input[id*="question_type_id"]:checked').val();if(void 0!=n&&""!=n)var o="/"+n+"/edit";else var o="/new";window.location.href=surveyor_gui_mount_point+"questions"+o+"?survey_section_id="+e+"&text="+t+"&display_order="+i+"&question_type_id="+s}function t(){var e=($("body"),$('input[id$="survey_section_id"]').val()),t=$('textarea[id*="question"][id$="_text"]').val(),i=$('input[id$="display_order"]').last().val(),n=$("input#question_id").val(),s=$(".questions").find('input[id*="question_group_id"]').val(),o=$('div.question_type input[id*="question_type_id"]:checked').val();if(void 0!=s&&""!=s)var r="/"+s+"/edit";else var r="/new";window.location.href=surveyor_gui_mount_point+"question_groups"+r+"?survey_section_id="+e+"&text="+t+"&display_order="+i+"&question_id="+n+"&question_type_id="+o}function i(){$(".group_inline_question").on("change",'select[id^="question_group_questions_attributes_"]',function(){$(this).show_group_answers()})}surveyor_gui_mount_point=$("#surveyor_gui_mount_point").data("surveyor_gui_mount_point"),surveyor_gui_mount_point=0==surveyor_gui_mount_point.length?"/":surveyor_gui_mount_point.replace(/surveyforms/i,""),$.ajaxSetup({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")}}),$('[required="required"]').addClass("required"),$.validator.addMethod("require-check",function(e,t){return $(t).closest("ol").find(".require-check:checked").size()>0},"Please check at least one box."),$.validator.addMethod("uislider",function(e,t){return null!=$(t).val()},"Please make a choice."),$("form").each(function(){$(this).validate({ignore:':not(input[class*="star-rating-applied"], select[class*="uislider"]):hidden',groups:getGroups(),errorPlacement:function(e,t){e.insertAfter("checkbox"===t.attr("type")?$(t).closest("ol").find("li").last():"radio"===t.attr("type")?t.is(".star-rating-applied")?$(t).closest("ol"):$(t).closest("ol").find("li").last():t.is(".uislider")?$(t).closest("ol"):t)}})}),$.blockUI.defaults.css={padding:0,margin:0,width:"100px",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"none",backgroundColor:"#fff",cursor:"wait"},$(document).bind("cbox_open",function(){$(parent.$.find("input#pass_cbox_data")).length>0&&$(parent.$.find("input#pass_cbox_data")).val("false")}),$(document).on("click","#survey_section_submit, #question_submit, #question_group_submit, #dependency_submit",function(){$(parent.$.find("input#pass_cbox_data")).val("true")}),$(document).on("ajaxComplete","form.question, form.survey_section, form.dependency, form.edit_survey_section",function(){0===$("#errorExplanation").length?$(parent.$.find("input#pass_cbox_data")).length>0&&"true"===$(parent.$.find("input#pass_cbox_data")).val()&&parent.$.fn.colorbox.close():$(parent.$.find("input#pass_cbox_data")).val("false")}),$(window).load(function(){0===$("#errorExplanation").length?$(parent.$.find("input#pass_cbox_data")).length>0&&"true"===$(parent.$.find("input#pass_cbox_data")).val()&&parent.$.fn.colorbox.close():$(parent.$.find("input#pass_cbox_data")).val("false");var e=window.location!=window.parent.location?!0:!1;e&&$("body").css({background:"#f3f3f3"})}),$(document).on("click","#edit_section_title",function(){var e=$(this).data("edit_survey_section_url"),t=$(this).data("replace_survey_section_url"),i=$(this).data("survey_section_id");$.colorbox({width:"40%",height:"30%",scrolling:!1,iframe:!0,onClosed:function(){submitted=$("input#pass_cbox_data").val(),submitted&&$.get(t,{},function(e){$("#survey_section_"+i).html(replace_idx($("#survey_section_"+i),"survey_sections",e)),refresh_stars()})},href:e,opacity:.3})}),$(document).on("click","#delete_section",function(){var e=$(this).data("survey_section_url"),t=$(this).data("survey_section_id");$.ajax({type:"DELETE",url:e,success:function(e){void 0!==typeof e&&e.length>0?alert(e):($("#survey_section_"+t).remove(),update_question_numbers(),update_dependency_questions())}})}),$(document).on("click","#add_question",function(){var e=$(this).data("insert_new_question_url"),t=$(this).data("new_question_url"),i=$(this).parents("div.survey_section").find("input[id$='id']").first().val(),n=$(this).data("prev_question_id"),s=null;$("div#box").addClass("jquery_add_question_started"),$.colorbox({width:"850px",height:"772px",scrolling:!0,iframe:!0,onCleanup:function(){$("#cboxLoadedContent iframe").load(function(){s=$("iframe.cboxIframe").contents().find("#cboxQuestionId").html()})},onClosed:function(){submitted=$("input#pass_cbox_data").val(),"true"===submitted&&$.get(e+"?question_id="+s,{},function(e){replace_surveyform_contents(e)})},href:t+"?survey_section_id="+i+(n?"&prev_question_id="+n:""),opacity:.3})}),$(document).on("click","#add_section",function(){var e=$(this).data("insert_survey_section_url"),t=$(this).data("new_survey_section_url"),i=$(this).data("survey_section_id"),n=$(this).data("survey_id");$("div#box").addClass("jquery_add_section_started"),$.colorbox({width:"517px;",height:"167px;",scrolling:!1,iframe:!0,onClosed:function(){submitted=$("input#pass_cbox_data").val(),submitted&&$.get(e,{},function(e){$("#survey_section_"+i).after(replace_idx($(".survey_section"),"survey_sections",e)),$("div#box").removeClass("jquery_add_section_started")})},href:t+"?prev_section_id="+i+"&suppress_header=true&survey_id="+n,opacity:.3})}),$(document).on("click","#edit_question",function(){var e=$(this).data("replace_question_url"),t=$(this).data("edit_question_url"),i=$(this).closest(".survey_section").find("input#surveyform_survey_sections_attributes_0_id").val(),n=$(this).data("question_id");$.colorbox({width:"850px",height:"772px",scrolling:!0,iframe:!0,onClosed:function(){submitted=$("input#pass_cbox_data").val(),submitted&&$.get(e,{},function(e){"not found"==e?$.get("/surveyforms/"+i+"/replace_survey_section?survey_section_id="+i,{},function(e){$("#survey_section_"+i).html(replace_idx($("#survey_section_"+i),"survey_sections",e)),refresh_stars()}):($("#question_"+n).html(replace_idx($("#question_"+n),"questions",e)),refresh_stars(),$("#question_"+n).update_single_uislider(),update_question_numbers())})},href:t,opacity:.3})}),$(document).on("click","#cut_section",function(){{var e=$(this).data("cut_section_surveyform_url");$(this).data("section_already_cut")}$("div#box").addClass("jquery_cut_section_started"),$.get(e,{},function(e){replace_surveyform_contents(e)})}),$(document).on("click","#paste_section",function(){var e=$(this).data("paste_section_surveyform_url");$("div#box").addClass("jquery_paste_section_started"),$.get(e,{},function(e){replace_surveyform_contents(e)})}),$(document).on("click","#cut_question",function(){{var e=$(this).data("cut_question_surveyform_url");$(this).data("question_already_cut")}$("div#box").addClass("jquery_cut_question_started"),$.get(e,{},function(e){replace_surveyform_contents(e)})}),$(document).on("click","#paste_question",function(){var e=$(this).data("paste_question_surveyform_url");$("div#box").addClass("jquery_paste_question_started"),$.get(e,{},function(e){replace_surveyform_contents(e)})}),$(document).on("click","#delete_question",function(){var e=$(this).data("question_url"),t=$(this).data("replace_form_surveyform_url");$.ajax({type:"DELETE",url:e,success:function(e){void 0!==typeof e&&e.length>0?alert(e):$.get(t,{},function(e){replace_surveyform_contents(e)})},error:function(){alert("This question cannot be deleted.")}})}),$(document).on("click","#edit_logic",function(){var e=$(this).data("replace_question_url"),t=$(this).data("edit_dependency_url"),i=$(this).data("question_id");$.colorbox({width:"98%",height:"80%",scrolling:!0,iframe:!0,onClosed:function(){submitted=$("input#pass_cbox_data").val(),submitted&&$.get(e,{},function(e){var t=$("#question_"+i).html(replace_idx($("#question_"+i),"questions",e));refresh_stars(t),update_question_numbers()})},href:t,opacity:.3})}),$(document).on("click","#delete_logic",function(){var e=$(this).data("replace_question_url"),t=$(this).data("dependency_url"),i=$(this).data("question_id");$.ajax({type:"DELETE",url:t,success:function(){$.get(e,{},function(e){var t=$("#question_"+i).html(replace_idx($("#question_"+i),"questions",e));refresh_stars(t),update_question_numbers()})},error:function(){alert("This logic cannot be deleted.")}})}),$(document).on("click","#add_logic",function(){var e=$(this).data("replace_question_url"),t=$(this).data("new_dependency_url"),i=$(this).data("question_id");$.colorbox({width:"98%",height:"50%",scrolling:!0,iframe:!0,onClosed:function(){submitted=$("input#pass_cbox_data").val(),submitted&&$.get(e,{},function(e){var t=$("#question_"+i).html(replace_idx($("#question_"+i),"questions",e));refresh_stars(t),update_question_numbers()})},href:t,opacity:.3})}),$(document).on("click",".go_back",function(){history.back()}),sortable_sections_and_questions(),$.fn.sortable_answers=function(){$("#sortable_answers").sortable({axis:"y",opacity:.6,scroll:!0,update:function(){update_answer_display_order()}})},update_uislider(),update_datepickers(),$.fn.check_dynamic_source=function(){$(this).closest("#answer_choice").find('input[id^="question_dynamically_generate_true"]').prop("checked")?($(this).closest("div#answer_choice").find("div#dynamic_source").show(),$(this).closest("div#answer_choice").find("div#fixed_source").hide()):($(this).closest("div#answer_choice").find("div#dynamic_source").hide(),$(this).closest("div#answer_choice").find("div#fixed_source").show())},$.fn.render_no_picks_partial=function(){var e=$("#no_picks_partial_url").data("render_no_picks_partial_url");here=$(this),$.get(e+"?id="+$(this).closest(".questions").find("input#question_id").val(),function(e){here.html(e)})},$.fn.render_answer_fields_partial=function(e){here=$(this);var t=$("#answer_fields_partial_url").data("answer_fields_partial_url");if(e===!0)var i="&add_row=true";else i=" ";$.get(t+"?id="+$(this).closest(".questions").find("input#question_id").val()+i,function(t){1==e?(t=replace_idx($(".question_answers_text"),"answers",t),here.append(t)):here.html(t),here.check_dynamic_source(),here.sortable_answers()})},$.fn.render_grid_fields_partial=function(e,t){here=$(this);var i=$("#render_grid_partial_url").data("render_grid_partial_url");t="undefined"!=typeof t?t:null,$.get(i+"?id="+$(this).closest(".questions").find("input#question_id").val()+"&question_type_id="+e+"&index="+parseInt(t),function(e){here.html(e),here.check_dynamic_source(),here.sortable_answers(),update_uislider(),check_dropdown_column_count()})},$.fn.render_group_inline_fields_partial=function(e){here=$(this);var t=$("#render_group_inline_partial_url").data("render_group_inline_partial_url"),n=$("input#question_group_survey_section_id").val();if(e===!0)var s="&add_row=true";else s=" ";var o=$(this).closest(".questions").find("input#question_group_id").first(),r=this.closest(".questions").find('input[id$="display_order"]').last().val();r=parseInt(r)+1,$.get(t+"?id="+o.val()+"&display_order="+r+s,function(t){1==e?(t=replace_idx($(".group_inline_question"),"questions",t),$(".sortable_group_questions").last().after(t)):$("#answer_choice").html(t),$(".group_inline_question").last().show_group_answers(),$(".group_inline_question").each(function(){$('input[id$="survey_section_id"]').val(n)}),i(),sortable_sections_and_questions()})},$("#answer_choice").on("click",".add_answer img",function(){$("#sortable_answers").render_answer_fields_partial(!0)}),$("#answer_choice").on("click",".add_group_inline_question",function(){$(this).render_group_inline_fields_partial(!0)}),$.fn.show_answers=function(){if($(this).val()in{pick_one:1,pick_any:1,slider:1,dropdown:1})$("#question_answers_attributes_0_text").val($("#original_choice").data("original_choice")),$("#answer_choice").show(),$(this).check_dynamic_source(),$(document).on("click",'input[id^="question_dynamically_generate"]',function(){$(this).check_dynamic_source()}),$("#sortable_answers").render_answer_fields_partial(),$('input[id^="question_dynamically_generate"]:checked').val()in{t:1,"true":1}&&($("#fixed_source").hide(),$("#dynamic_source").show());else if($(this).val()in{grid_one:1,grid_any:1,grid_dropdown:1})$("#question_answers_attributes_0_text").val($("#original_choice").data("original_choice")),$("#sortable_answers").render_grid_fields_partial(this.val()),$("#answer_choice").show();else if($(this).val()in{group_inline:1,group_default:1,repeater:1})$("#question_answers_attributes_0_text").val($("#original_choice").data("original_choice")),t();else switch($("#answer_choice").hide(),$("#sortable_answers").html(""),$(this).val){case"Number":$("#question_answers_attributes_0_text").val("Float");break;case"Text":$("#question_answers_attributes_0_text").val("Text");break;default:$("#question_answers_attributes_0_text").val("String")}},$.fn.show_group_answers=function(){$(this).val()in{pick_one:1,pick_any:1,slider:1,dropdown:1}?$(this).closest(".group_inline_question").find(".group_answers_textbox").show():$(this).closest(".group_inline_question").find(".group_answers_textbox").hide()},$.fn.show_number_questions=function(){"number"===$(this).val()?$("#number_questions").render_no_picks_partial():$("#number_questions").html("")},$('input[id^="question_question_type_"],input[id^="question_group_question_type_"]').on("change",function(){!($(this).val()in{group_inline:1,group_default:1,repeater:1})&&$(".edit_question_group, .new_question_group").length>0?e():($(this).show_answers(),$(this).show_number_questions())}),$(".group_inline_question").each(function(){$(this).find('select[id$="question_type_id"]').show_group_answers()}),$(".group_inline_question").on("change",'select[id^="question_group_questions_attributes_"]',function(){$(this).show_group_answers()}),$('input[id^="question_question_type_"]:checked').each(function(){$(this).show_number_questions(),$(this).show_answers()}),$("input#dependency_submit").on("click").trigger("submit"),$(".surveyor_gui_report .report_data_display").hide(),$.fn.render_dependency_conditions_partial=function(e){if($(this).length>0){if(here=$(this),e===!0)var t="&add_row=true";else t=" ";$.get(surveyor_gui_mount_point+"dependency/render_dependency_conditions_partial?id="+$(this).data("question_id")+"&dependency_id="+$(this).data("dependency_id")+t,function(t){e===!0?(t=replace_idx($(".question_dependency_dependency_conditions_question_id"),"dependency_conditions",t),here.append(t)):here.html(t),$('select[id*="dependency_conditions_attributes"][id$="question_id"]').each(function(){$(this).determine_dependency_question_type()}),$('select[id$="join_operator"]').first().parents("tr").hide()})}},$("#dependency_conditions_partial").render_dependency_conditions_partial(),$("div.dependency_editor").on("click",".add_condition img",function(){$(this).closest("div").find("#dependency_conditions_partial").render_dependency_conditions_partial(!0)}),$(".dependency_editor").on("change",'select[id*="dependency_conditions_attributes"][id$="question_id"]',function(e){$(e.target).determine_dependency_question_type()}),$(".dependency_editor").on("change",'select[id*="dependency_conditions_attributes"][id$="column_id"]',function(e){$(e.target).refresh_dependency_answers()}),$("input.autocomplete").each(function(){update_autocomplete_idx(this)}),$("form[id^='survey_form']").find(".filename_with_link").find("a").each(function(){var e=$(this).parent(".filename_with_link"),t=$(this).closest("ol").find("input").filter(function(){return/r_\d+_id/.test($(this).attr("id"))}).val();insert_file_delete_icon(e,t)}),$(".surveyor_gui_report .show_data").on("click",function(){show_survey_report_data()}),$(".surveyor_gui_report .hide_data").on("click",function(){hide_survey_report_data()}),$("form").bind("ajax:success, ajax:error",function(){if($(this).data("remotipartSubmitted")){var e=$(this).find('input[type="file"]');e.each(function(){var e=$(this).attr("data-object-class"),t=$(this).attr("id");indexRegExp1=/[0-9]+/g;var i=parseInt(indexRegExp1.exec(t));if(indexRegExp1.lastIndex=0,"Response"==e){var n=$(this).closest("ol").find('input[type="file"]').attr("data-response_set_id"),s=$(this).closest("ol").find('input[type="file"]').closest("ol").find('input[id$="question_id"]').val();$.get("/surveyor/get_response_id?question_id="+s+"&response_set_id="+n,function(t){var o=t;o&&$.get("/pages/get_filename?object="+e+"&id="+o,function(e){var t=$('input[id$="question_id"][value="'+s+'"]').closest("ol").find(".filename_with_link");t.html("current file is: "+e),insert_file_delete_icon(t,o,i),insert_id_if_missing(t.closest("ol").find("input"),o),selects=$("form[id^='survey_form'] select").add("form[id^='survey_form'] li.star"),selects.each(function(){var e=$(this).closest("ol").find('input[id$="question_id"]').val(),t=this;$.get("/surveyor/get_response_id?question_id="+e+"&response_set_id="+n,function(e){insert_id_if_missing($(t).closest("ol").find("input"),e)})}),$("input, select, submit").unblock()})})}})}})}function replace_surveyform_contents(e){$("div#box").filter(":last").replaceWith(e),sortable_sections_and_questions(),refresh_stars(),update_uislider(),update_datepickers()}function check_dropdown_column_count(){$('select[id="question_dropdown_column_count"]').on("change",function(){count=$(this).val(),$(this).closest("#sortable_answers").render_grid_fields_partial("grid_dropdown",count)})}function getAllSerialize(){return $(".sortable_questions").each(function(e){newarr=0===e?$(this).sortable("serialize",{key:$(this).attr("id")+"[]"}):newarr+"&"+$(this).sortable("serialize",{key:$(this).attr("id")+"[]"})}),newarr}function insert_id_if_missing(e,t){var i=e[0].id;indexRegExp1=/[0-9]+/g,idx=parseInt(indexRegExp1.exec(i));var n=e.filter(function(){return/r_\d+_id/.test($(this).attr("id"))}).length;n||e.filter('input[id$="question_id"]').after('<input id="r_'+idx+'_id" class="" type="hidden" value="'+t+'" name="r['+idx+'][id]">'),indexRegExp1.lastIndex=0}function insert_file_delete_icon(e,t,i){if(0==e.find("img").length&&t){var n=e.attr("data-image-path"),s="remove_attachment('Response',"+t+","+i+"); return false;",o=new Function(s);e.append('<img src="'+n+'" />').find("img").attr("onclick","").click(o)}}function CurrencyFormatted(e){var t=parseFloat(e);isNaN(t)&&(t=0);var i="";return 0>t&&(i="-"),t=Math.abs(t),t=parseInt(100*(t+.005)),t/=100,s=new String(t),s.indexOf(".")<0&&(s+=".00"),s.indexOf(".")==s.length-2&&(s+="0"),s=i+s,s}function copy_fieldset(e){var t=e.closest("fieldset").filter(":last").find("input, select").filter(":first"),i=get_1st_index(e.closest("form").find("fieldset").filter(":last").find("tr.fields input").filter(":first"));i+=1;var n=e.closest("form").find("fieldset").filter(":last").clone();return n.find("input, select").each(function(){var e=this.id,t=e.replace(/\d/,i);this.id=t,$("#sortable_answers");var n=this.name,s=n.replace(/\d/,i);this.name=s,$(this).removeAttr("value"),this.disabled=null}),t.closest("fieldset").after(n),n.before("<br />"),n.focus(),n}function copy_row(e,t){var i=e.closest("fieldset").find("tr.fields").filter(":last").find("input, select").filter(":first"),n=get_1st_index(e.closest("fieldset").find("tr.fields input").filter(":first")),s=get_index(i);s+=1;var o=e.closest("fieldset").find("tr.fields").filter(":last").clone();return o.find("input, select").each(function(){var e=this.id,t=e.replace(/\d(?!.*\d)/g,s);t=t.replace(/\d+(?=_fs_products_attributes)/g,n),this.id=t;var i=this.name,o=i.replace(/\d(?!.*\d)/g,s);o=o.replace(/\d+(?=_fs_products_attributes)/g,n),this.name=o,$(this).removeAttr("value"),this.disabled=null}),$(t).closest("tr").before(o),o}function update_display_order(e){$(e).each(function(e,t){$(t).find('input[id$="display_order"]').first().val(e+1)})}function get_index(e){var t=e.attr("name"),i=/\d+(?!.*\d)/g,n=parseInt(i.exec(t));return i.lastIndex=0,n}function get_1st_index(e){var t=e.attr("name"),i=/\d+/,n=parseInt(i.exec(t));return i.lastIndex=0,n}function replace_idx(e,t,i){var n=new RegExp("[0-9]+"),s=$(e).length+1;n.lastIndex=0;var o=new RegExp(t+"_attributes_0","g"),i=i.replace(o,t+"_attributes_"+s);return o=new RegExp(t+"_attributes]\\[0","g"),i=i.replace(o,t+"_attributes]["+s)}function update_question_numbers(){$("span.questions").each(function(e,t){var i=/\d+\)/g;$(t).html($(t).html().replace(i,e+1+")")),$(t).prev('input[id$="display_order"]').val(e+1)})}function update_answer_display_order(){$("#sortable_answers").find('input[id$="display_order"]').each(function(e,t){$(t).val(e)})}function update_dependency_questions(){$(".question_logic_notifier").closest("div.question").each(function(){var e=$(this).closest("div.question").attr("id").match(/\d+/)[0];$.get(surveyor_gui_mount_point+"surveyforms/0/replace_question?question_id="+e,{},function(t){$("#question_"+e).html(replace_idx($("#question_"+e),"questions",t)),$.unblockUI()})})}function refresh_stars(e){void 0===e?$("input[type=radio].star").rating():$(e).find("input[type=radio].star").rating()}function sortable_sections_and_questions(){var e=$(".sortable_sections").data("survey_locked");e||($(".sortable_sections").sortable({axis:"y",opacity:.6,scroll:!0,update:function(){$.ajax({type:"post",data:$(".sortable_sections").sortable("serialize")+"&survey_id="+$("input#surveyform_id")[0].value,dataType:"script",complete:function(){$("#survey_section").effect("highlight")},url:surveyor_gui_mount_point+"survey_sections/sort"})}}),$(".sortable_group_questions").sortable({axis:"y",opacity:.6,scroll:!0,connectWith:".sortable_group_questions",update:function(){var e=$(".group_inline_question"),t=Math.min.apply(null,e.find('input[id*="display_order"]').map(function(){return parseInt($(this).val())}).toArray());$(".group_inline_question").each(function(i){e.eq(i).find('input[id*="display_order"]').val(t+i)})}}),$(".sortable_questions").sortable({axis:"y",opacity:.6,scroll:!0,connectWith:".sortable_questions",update:function(){$.ajax({type:"post",data:getAllSerialize()+"&survey_id="+$('input[id*="surveyform_id"]')[0].value,dataType:"script",complete:function(){$("#survey_section").effect("highlight"),update_question_numbers()},url:surveyor_gui_mount_point+"/questions/sort"})}}))}function show_dependency_value(e,t){t=t.closest("tr").find("td.answer_field"),e=e.split(",");var i=(e[0],e[1]),n=e[2];t.find(".dependency_pick_multiple_choice").hide(),t.find(".dependency_float").hide(),t.find(".dependency_star").hide(),t.find(".dependency_number").hide(),t.find(".dependency_text_box").hide(),t.find(".dependency_date").hide(),t.find(".dependency_text").hide(),t.closest("tr .column_id").hide(),/(one|any)/.test(i)?t.find(".dependency_pick_multiple_choice").show():"dropdown"==i?t.find(".dependency_pick_multiple_choice").show():"grid_dropdown"==i?(t.find(".dependency_pick_multiple_choice").show(),t.refresh_dependency_columns(i,n)):"stars"==i?t.find(".dependency_star").show():"number"==i?t.find(".dependency_float").show():"box"==i?t.find(".dependency_text_box").show():"date"==i?t.find(".dependency_date").show():t.find(".dependency_text").show(),t.refresh_dependency_answers()}function remove_fields(e,t){t=t||".fields",$(e).prev("input[type=hidden]").val("1"),$(e).closest(t).hide()}function remove_dependency_condition(e){$(e).prev("input[type=hidden]").val("1"),$(e).closest("tr").hide().prev("tr").hide()}function remove_fieldset(e){$(e).prev("input[type=hidden]").val("1"),$(e).closest("fieldset").filter(":first").hide()}function remove_relation(e,t){var i=$.ajax({type:"GET",url:t,async:!1}).responseText;$(e).closest("tr").remove()}function add_fields(e,t,i){var n=(new Date).getTime(),s=new RegExp("new_"+t,"g");a=$(e).parent().before(i.replace(s,n)).prev().find('input[type!="hidden"]').first().focus()}function update_autocomplete_idx(e){if(elements=$(e).attr("data-update-elements"),elements){var t=new RegExp("autocompleteidx","g"),i=$(e).attr("id");indexRegExp1=/[0-9]+/g,idx=parseInt(indexRegExp1.exec(i)),indexRegExp1.lastIndex=0,elements=elements.replace(t,idx),$(e).attr("data-update-elements",elements)}}function remove_attachment(e,t,i){$.get("/pages/remove_attachment?object="+e+"&id="+t,function(e){$(".filename_with_link").html("");var t=$('input[id="r_'+i+'_id"]').nextAll("li").find('input[type="file"]'),n=t.parent(),s=$("<input>",{id:t.attr("id"),name:t.attr("name"),type:"file"});s.attr("data-response_set_id",t.attr("data-response_set_id")),s.attr("data-object-id",t.attr("data-object-id")),s.attr("data-object-class",t.attr("data-object-class")),e&&"true"===e&&s.attr("required","required"),n.html(s),$('input[id="r_'+i+'_id"]').remove()})}function go_back(){$("#initial_buttons").show(),$("#deny_buttons").hide(),$("#revise_buttons").hide(),$("#show_schedule").show(),$("#revise_schedule").hide()}function go_back_2(){$("#revision_requests").show(),$("#revision_form").hide(),$("#withdrawal_form").hide(),$("#make_revisions_button").show()}function show_survey_report_data(){$(".non_repeater .report_data").show(),$(".show_survey_report_data_button").hide()}function hide_survey_report_data(){$(".surveyor_gui_report .report_data").hide(),$(".show_survey_report_data_button").show()}function getGroups(){var e={},t=$('input[type="checkbox"], input[type="radio"]').closest("ol");return t.each(function(t){var i=$.map($(this).find('input[type="checkbox"]'),function(e){return $(e).attr("name")}).join(" ");e["fieldPair_"+t]=i}),e}function update_uislider(){$("select.uislider").each(function(){"function"==typeof $(this).selectToUISlider&&$(this).selectToUISlider({labels:2,labelSrc:"text",sliderOptions:{stop:function(){$(this).parents("form").trigger("slider_change")}}}).hide()})}function update_datepickers(){$("input.date_picker").datepicker({duration:"fast",showOn:"both",buttonImage:"/../../assets/datepicker.gif",buttonImageOnly:!0}),$("input.datetime_picker").datetimepicker({duration:"fast",showOn:"both",buttonImage:"../../assets/datepicker.gif",buttonImageOnly:!0}),$("input.time_picker").timepicker({duration:"fast",showOn:"both",buttonImage:"../../assets/datepicker.gif",buttonImageOnly:!0})}function modal_dialog(e,t,i,n){$("<div></div>").appendTo("body").html(t).dialog({closeOnEscape:!1,modal:!0,title:e,zIndex:1e4,autoOpen:!1,fixed:!0,width:"auto",resizable:!1,buttons:{Yes:function(){$(this).dialog("close"),i()},No:function(){$(this).dialog("close"),n()}},open:function(){$(".ui-dialog-titlebar-close").hide()},close:function(){$(this).remove()}}).parent().css({position:"fixed"}).end().dialog("open")}!function(e){e(document).ready(function(){application_js_code()})}(jQuery),$.fn.update_single_uislider=function(){var e=$(this).find("select.uislider").first();e.length>0&&"function"==typeof e.selectToUISlider&&e.selectToUISlider({labels:2,labelSrc:"text",sliderOptions:{stop:function(){e.parents("form").trigger("slider_change")}}}).hide()},$.fn.determine_dependency_question_type=function(){var e=$(this);$.get(surveyor_gui_mount_point+"dependencys/get_question_type","question_id="+$(this).val(),function(t){show_dependency_value(t,e)})},$.fn.refresh_dependency_answers=function(){var e=$(this).closest("tr").find('[id*="dependency_attributes_dependency_conditions_attributes"][id$="question_id"]').val(),t=$(this).closest("tr").find('[id*="dependency_attributes_dependency_conditions_attributes"][id$="column_id"]').val(),i=$(this).closest("tr").find('[id*="dependency_attributes_dependency_conditions_attributes"][id$="_id"]').val();$(this).closest("tr").find('[id*="dependency_attributes_dependency_conditions_attributes"][id$="answer_id"]').load(surveyor_gui_mount_point+"dependencys/get_answers","question_id="+e+"&dependency_condition_id="+i+"&column_id="+t)},$.fn.refresh_dependency_columns=function(e,t){var i=$(this).closest("tr").find('[id*="dependency_attributes_dependency_conditions_attributes"][id$="column_id"]'),n=$(this).closest("tr").find('[id*="dependency_attributes_dependency_conditions_attributes"][id$="_id"]').val();i.closest(".column_id").show(),$.get(surveyor_gui_mount_point+"dependencys/get_columns","question_id="+t+"&dependency_condition_id="+n,function(e){i.html(e),i.refresh_dependency_answers()})};